{"version":3,"sources":["webpack://messenger/webpack/bootstrap","webpack://messenger/../components/src/interface.js","webpack://messenger/../components/src/Theme.js","webpack://messenger/../common/src/index.js","webpack://messenger/./src/utils/builder.js","webpack://messenger/../messaging/src/messaging.js","webpack://messenger/../components/src/index.js","webpack://messenger/../components/src/components/Message/index.js","webpack://messenger/./src/hooks/ui.js","webpack://messenger/./src/utils/styled/genStyle.js","webpack://messenger/./src/utils/styled/index.js","webpack://messenger/./src/utils/store/index.js","webpack://messenger/./src/index.js","webpack://messenger/../messaging/src/index.js","webpack://messenger/../messaging/src/dialog.js","webpack://messenger/../dialog/src/index.js","webpack://messenger/../dialog/src/dialog.js","webpack://messenger/../common/src/utils/dateTools.js","webpack://messenger/../common/src/utils/deepCopy.js","webpack://messenger/../messaging/src/echo.js","webpack://messenger/./src/client.js","webpack://messenger/../components/src/Messenger/index.js","webpack://messenger/../components/src/Messenger/Messenger.js","webpack://messenger/../components/src/components/Box/index.js","webpack://messenger/../components/src/components/Box/Box.js","webpack://messenger/../components/src/components/Header/index.js","webpack://messenger/../components/src/components/Header/Header.js","webpack://messenger/../components/src/components/List/index.js","webpack://messenger/../components/src/components/List/List.js","webpack://messenger/../components/src/components/Footer/index.js","webpack://messenger/../components/src/components/Footer/Footer.js","webpack://messenger/../components/src/components/Message/Message.js","webpack://messenger/../components/src/components/Input/index.js","webpack://messenger/../components/src/components/Input/Input.js","webpack://messenger/../components/src/components/FAButton/index.js","webpack://messenger/../components/src/components/FAButton/FAButton.js","webpack://messenger/./src/app.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Interface","html","styled","createElement","palette","primary","secondary","background","surface","onPrimary","onSecondary","onBackground","onSurface","disabledText","fonts","font","size","style","weight","spacing","radius","smallRadius","shadow","messenger","width","height","element","props","children","definition","deepCopy","array","length","Array","isArray","filter","v","undefined","render","container","state","insert","innerText","el","document","keys","forEach","type","isAttribute","setCurrent","className","substring","addEventListener","toLowerCase","setAttribute","defaultProps","theme","genClassRules","dangerouslySetInnerHTML","innerHTML","__html","child","before","insertBefore","appendChild","e","current","ref","async","messages","message","push","from","text","created_time","Date","now","listener","Messenger","Message","FAButton","default","ui","styleSheet","genStyle","styledObj","styles","parameters","findMedias","_obj","rules","obj","trim","index","subIndex","indexOf","main","lastIndexOf","medias","sheet","title","getElementsByTagName","getStylesheet","selectors","selector","map","Math","random","join","sub","genClassRule","css","insertRule","unshift","store","initialState","messageListener","root","body","config","dataset","response","fetch","json","err","src","intents","messagingType","messaging","addMessage","getMessages","createMessage","cmds","contexts","matchIntents","buildResponse","matchs","msg","id","Dialog","preprocessOutput","output","set","replace","match","getValue","_value","entities","htmlRenderer","complexLabel","complexUrl","url","label","extractAndMatch","input","sentenceB","offset","eq","_intents","initialContexts","resp","buildOutput","context","userId","renderer","any","intent","topic","template","_name","renderTemplate","_intent","j","preprocessIntent","findIndex","inputIndex","sort","a","b","order","date","locale","remaining","years","floor","months","days","toLocaleString","hours","mins","_elements","stack","assign","elements","copy","getTime","k","ek","pop","commands","echo","setup","handleAction","handleEventMessage","getElementsByClassName","createdtime","avatar","fromUser","onAction","parseInt","getAttribute","scrollTop","scrollHeight","firstChild","remove","sendMessage","charAt","action","data","StyledMessenger","Box","Theme","MessengerHeader","Header","MessengerFooter","Footer","Conversation","List","FooterInput","Input","isExpanded","display","header","onMessage","onClick","Messages","m1","m2","inputComponent","handleKey","event","target","onKeyUp","placeholder","Styled","Avatar","meta","friendlyDate","tagName","textContent","alt","Fab","icon","_color","_bubbleColor","color","bubbleColor","_isOpen","useSelector","isOpen","messengerRef","useRef","handleFabClick","classList","toggle","stopPropagation","MessengerFrame"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 11);\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nconst Interface = {};\n\nexport const setup = ({ html, styled, createElement }) => {\n  if (!Interface.html) {\n    Interface.html = html;\n    Interface.styled = styled;\n    Interface.createElement = createElement;\n    // Object.freeze(Interface);\n  }\n  return Interface;\n};\n\nexport default Interface;\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nconst Theme = {\n  palette: {\n    primary: 'palevioletred',\n    secondary: '#70DBB8',\n    background: 'smokewhite',\n    surface: 'papayawhip',\n    onPrimary: 'white',\n    onSecondary: 'white',\n    onBackground: 'dark',\n    onSurface: 'gray',\n    disabledText: 'lightGrey',\n  },\n  fonts: [],\n  font: {\n    size: '16px',\n    style: 'normal',\n    weight: '400',\n  },\n  spacing: 8,\n  radius: 12,\n  smallRadius: 4,\n  shadow: 'rgba(0,0,0,0.2) 0px 2px 4px -1px,rgba(0,0,0,0.14) 0px 4px 5px 0px,rgba(0,0,0,0.12) 0px 1px 10px 0px',\n\n  messenger: {\n    width: '400px',\n    height: '600px',\n  },\n};\n\nexport default Theme;\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { friendlyDate } from './utils/dateTools';\nimport deepCopy from './utils/deepCopy';\n\nexport { friendlyDate, deepCopy };\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport { deepCopy } from '@ziiircom/common';\nimport { genClassRules } from './styled/genStyle';\n\nexport const html = () => {\n  // TODO\n};\n\nexport const createElement = (element, props, ...children) => {\n  let definition;\n  if (element.element) {\n    definition = deepCopy({}, element);\n    definition.props = deepCopy({}, definition.props, props);\n  } else {\n    definition = { props: {} };\n    definition.element = element;\n    if (props) {\n      definition.props = props;\n    }\n  }\n  let array = children;\n  if (children.length === 1 && Array.isArray(children[0])) {\n    [array] = children;\n  }\n  definition.children = array.filter(v => v !== undefined);\n  return definition;\n};\n\nexport const render = (element, container, state = {}, insert) => {\n  if (!element) {\n    return;\n  }\n  if (typeof element === 'string') {\n    const c = container;\n    c.innerText = element;\n    return;\n  }\n\n  let { children } = element;\n  if (typeof element.element === 'string') {\n    const el = document.createElement(element.element);\n    if (element.props) {\n      Object.keys(element.props).forEach(n => {\n        const v = element.props[n];\n        const type = typeof v;\n        const isAttribute = type === 'string' || type === 'number' || type === 'boolean';\n        if (n === 'ref') {\n          v.setCurrent(el);\n        } else if (n === 'className') {\n          el.className = v;\n        } else if (type === 'function') {\n          if (n.substring(0, 2) === 'on') {\n            el.addEventListener(n.substring(2).toLowerCase(), v);\n          }\n        } else if (isAttribute) {\n          el.setAttribute(n, v);\n        }\n      });\n    }\n    if (element.styled) {\n      const defaultProps = { ...element.defaultProps };\n      const theme = state.theme || {};\n      const props = deepCopy(defaultProps, element.props, { theme });\n      let className = genClassRules(element.styled, props, defaultProps);\n      if (element.props.className) {\n        className += ` ${element.props.className}`;\n      }\n      el.className = className;\n    }\n    if (element.props && element.props.dangerouslySetInnerHTML) {\n      // eslint-disable-next-line no-underscore-dangle\n      el.innerHTML = element.props.dangerouslySetInnerHTML.__html;\n    }\n    if (children) {\n      children.forEach(child => {\n        render(child, el, state);\n      });\n    }\n    if (insert && insert.before) {\n      container.insertBefore(el, insert.before);\n    } else {\n      container.appendChild(el);\n    }\n  } else if (typeof element === 'function') {\n    const e = element({ ...element.props, children, styled: element.styled });\n    render(e, container, state);\n    children = null;\n  } else if (element.element && typeof element.element === 'function') {\n    const e = element.element({ ...element.props, children });\n    if (element.styled) {\n      e.styled = [...element.styled, ...e.styled];\n    }\n    render(e, container, state);\n    children = null;\n  }\n};\n\nexport const useRef = current => {\n  const ref = {\n    current,\n    setCurrent: el => {\n      ref.current = el;\n    },\n  };\n  return ref;\n};\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport { deepCopy } from '@ziiircom/common';\n\n// Messaging service\nconst useMessaging = async listener => {\n  let messages = [];\n\n  const createMessage = (from, text) => ({ from, text, created_time: Date.now() });\n\n  const sendMessage = undefined;\n\n  const commands = async type => {\n    if (type === '#reset') {\n      listener({ type: 'resetMessages' });\n      messages = [];\n    } else {\n      listener({ type: 'unknownCommand' });\n    }\n  };\n\n  const addMessage = message => messages.push(deepCopy(message));\n\n  const getMessages = async () => deepCopy(messages);\n\n  return [addMessage, getMessages, createMessage, sendMessage, commands];\n};\n\nexport default useMessaging;\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport Interface, { setup } from './interface';\n\nexport { setup, Interface };\n\nexport default async function() {\n  const Messenger = await import('./Messenger/index.js');\n  const Message = await import('./components/Message/index.js');\n  const FAButton = await import('./components/FAButton/index.js');\n  return { Messenger: Messenger.default, Message: Message.default, FAButton: FAButton.default };\n}\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport Message from './Message';\n\nexport default Message;\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport UI from '@ziiircom/components';\n\nlet ui;\n\nconst useUI = async () => {\n  if (!ui) {\n    ui = await UI();\n  }\n  return ui;\n};\n\nexport default useUI;\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nlet styleSheet;\n\nconst getStylesheet = () => {\n  if (!styleSheet) {\n    const style = document.createElement('style');\n    style.type = 'text/css';\n    style.title = 'MainCSS';\n    document.getElementsByTagName('head')[0].appendChild(style);\n    styleSheet = style.sheet;\n  }\n  return styleSheet;\n};\n\nconst c = 'abcdefghijklmnopqrstuvwxyz';\n// eslint-disable-next-line no-bitwise\nconst genSelector = () => [...Array(5)].map(() => c[~~(Math.random() * c.length)]).join('');\n\nconst genStyle = (styledObj, props) => {\n  let style = '';\n  if (styledObj && Array.isArray(styledObj.styles)) {\n    styledObj.styles.forEach((s, i) => {\n      style += s;\n      if (styledObj.parameters[i]) {\n        style += styledObj.parameters[i](props);\n      }\n    });\n  }\n  return style;\n};\n\nconst findMedias = (_obj, rules) => {\n  const obj = _obj;\n  if (rules.trim().length === 0) return;\n  let index = 0;\n  let subIndex = rules.indexOf('@', index);\n  while (subIndex > -1) {\n    obj.main += rules.substring(index, subIndex).trim();\n    const s = rules.indexOf('@', subIndex + 1);\n    if (s !== -1) {\n      index = s;\n    } else {\n      index = rules.lastIndexOf('}') + 1;\n      /* if (index === -1) {\n        index = rules.length;\n      } */\n    }\n    // Insert media query\n    obj.medias.push(rules.substring(subIndex, index));\n    subIndex = s;\n  }\n  obj.main += rules.substring(index).trim();\n};\n\nconst genClassRule = (obj, styledObj, props) => {\n  const rules = genStyle(styledObj, props);\n\n  let index = 0;\n  let subIndex = rules.indexOf('&', index);\n  if (subIndex === -1) {\n    // No sub-rules\n    findMedias(obj, rules);\n  } else {\n    while (subIndex > -1) {\n      findMedias(obj, rules.substring(index, subIndex));\n      index = rules.indexOf('}', subIndex + 2);\n      obj.sub.push(rules.substring(subIndex + 1, index + 1));\n      index += 1;\n      subIndex = rules.indexOf('&', index);\n    }\n    findMedias(obj, rules.substring(index));\n  }\n};\n\nconst genClassRules = (styled, props, defaultProps = {}) => {\n  const sheet = getStylesheet();\n  let selectors = '';\n  styled.forEach(styledObj => {\n    const selector = defaultProps.selector || genSelector();\n    const obj = { main: '', sub: [], medias: [] };\n    genClassRule(obj, styledObj, props);\n    if (obj.main && obj.main.length > 0) {\n      let css = `.${selector} { ${obj.main} }`;\n      sheet.insertRule(css);\n      obj.sub.forEach(r => {\n        css = `.${selector}${r}`;\n        sheet.insertRule(css);\n      });\n      obj.medias.forEach(r => {\n        sheet.insertRule(r);\n      });\n      selectors += `${selector} `;\n    }\n  });\n\n  return selectors.trim();\n};\n\nexport { genStyle, genClassRules };\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport { createElement } from '../builder';\nimport { genStyle } from './genStyle';\n\nconst styled = (element, props, ...children) => (styles, ...parameters) => {\n  const v = element;\n  const el = createElement(v, props, ...children);\n  if (el.styled) {\n    el.styled.unshift({ styles, parameters });\n  } else {\n    el.styled = [{ styles, parameters }];\n  }\n  return el;\n};\n\nexport { styled, genStyle };\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nlet store;\n\nexport default initialState => {\n  store = { ...initialState };\n  return store;\n};\n\nexport const useSelector = selector => selector({ ...store });\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport useMessaging from '@ziiircom/messaging';\n\nimport client from './client';\n\nconst messenger = async (initialState = { messenger: {} }, messageListener, root = document.body) => {\n  let config;\n  let dataset;\n  try {\n    // config = await import('./config.json');\n    // config = config.default;\n    const response = await fetch('./config.json');\n    config = await response.json();\n  } catch (err) {\n    // console.log('no config found');\n  }\n  if (!config) {\n    config = {};\n  }\n  const state = { ...config, ...initialState };\n  if (state.dataset) {\n    if (state.dataset.src) {\n      try {\n        const response = await fetch(state.dataset.src);\n        dataset = await response.json();\n      } catch (err) {\n        // console.log('no intents found', err);\n      }\n    } else {\n      ({ dataset } = state);\n    }\n    if (dataset && dataset.intents) {\n      dataset = dataset.intents;\n    }\n  } else if (state.intents) {\n    if (state.intents.src) {\n      try {\n        const response = await fetch(state.intents.src);\n        dataset = await response.json();\n      } catch (err) {\n        // console.log('no intents found', err);\n      }\n    } else {\n      dataset = state.intents;\n    }\n  }\n  const messagingType = dataset ? 'dialog' : undefined;\n  const messaging = await useMessaging(messagingType);\n  return client({ state, messaging, root, messageListener, dataset });\n};\n\nif (process.env.NODE_ENV === 'development') {\n  messenger();\n}\n\nexport default messenger;\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nconst useMessaging = async type => {\n  let messaging;\n  if (type === 'dialog') {\n    try {\n      messaging = (await import('./dialog')).default;\n    } catch (err) {\n      // console.log('no dialog found');\n    }\n  }\n  if (!messaging) {\n    try {\n      messaging = (await import('./echo')).default;\n    } catch (err) {\n      // console.log('no echo found');\n    }\n  }\n  return messaging;\n};\n\nexport default useMessaging;\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport Dialog from '@ziiircom/dialog';\nimport { deepCopy } from '@ziiircom/common';\nimport useMessaging from './messaging';\n\n// simple Dialog Messaging service\nconst useDialog = async (listener, intents) => {\n  const [addMessage, getMessages, createMessage, , cmds] = await useMessaging(listener);\n  const contexts = {};\n  const [matchIntents, buildResponse] = Dialog(intents, contexts);\n\n  const sendMessage = async message => {\n    addMessage(message);\n    await listener({ type: 'newMessage', message: deepCopy(message) });\n    const matchs = matchIntents(message);\n    const { response } = buildResponse(matchs);\n    const msg = createMessage('bot', response);\n    addMessage(msg);\n    await listener({ type: 'newMessage', message: msg });\n  };\n\n  const commands = async type => {\n    if (type === '#reset') {\n      Object.keys(contexts).forEach(id => {\n        delete contexts[id];\n      });\n    }\n    return cmds(type);\n  };\n\n  return [getMessages, createMessage, sendMessage, commands];\n};\n\nexport default useDialog;\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport Dialog from './dialog';\n\nexport default Dialog;\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport { deepCopy } from '@ziiircom/common';\n\nconst preprocessOutput = (output, set = {}) => {\n  const text = output.replace(/<<\\s*([\\w.]+)\\s*=\\s*(.+?)\\s*>>/g, (match, name, value) => {\n    // eslint-disable-next-line no-param-reassign\n    set[name] = value;\n    return '';\n  });\n  return { text, set };\n};\n\nconst preprocessIntent = _intent => {\n  const intent = deepCopy(_intent);\n  const { output } = intent;\n  if (Array.isArray(output)) {\n    output.forEach((o, i) => {\n      if (o.type === 'condition') {\n        o.children.forEach((c, j) => {\n          // eslint-disable-next-line no-param-reassign\n          const { text, set } = preprocessOutput(c.text, c.set);\n          if (Object.keys(set).length === 0) {\n            intent.output[i].children[j] = { ...c, text };\n          } else {\n            intent.output[i].children[j] = { ...c, set, text };\n          }\n        });\n      } else {\n        const { text, set } = preprocessOutput(o);\n        intent.output[i] = { set };\n        if (Object.keys(set).length === 0) {\n          intent.output[i] = text;\n        } else {\n          intent.output[i] = { set, text };\n        }\n      }\n    });\n  } else {\n    const { text, set } = preprocessOutput(output);\n    if (Object.keys(set).length === 0) {\n      intent.output = text;\n    } else {\n      intent.output = { set, text };\n    }\n  }\n\n  return intent;\n};\n\nconst getValue = (_value, entities) => {\n  let value = _value;\n  /* istanbul ignore next */\n  if (value === '*') {\n    [{ value }] = entities;\n  }\n  return value;\n};\n\nconst renderTemplate = (template, context, entities) => {\n  const set = {};\n  const response = template.replace(/{{\\s*([\\w.]+)\\s*(=\\s*(.+?)\\s*)*}}/g, (match, _name, eq, replace) => {\n    const name = _name.trim();\n    if (eq) {\n      set[name] = getValue(replace, entities);\n    }\n    const value = set[name] || context[name] || '';\n    return value;\n  });\n  return { response, set };\n};\n\nconst htmlRenderer = message => {\n  const html = message.replace(/https?:\\/\\/\\S*|\\[(.*?)\\]\\((.*?)\\)/gi, (match, complexLabel, complexUrl) => {\n    let url = match;\n    let label = url;\n    if (complexLabel) {\n      label = complexLabel;\n      url = complexUrl;\n    }\n    if (url.match(/\\.(jpg|jpeg|gif|png)$/gi)) {\n      return `<a href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"${url}\" alt=\"${label}\" /></a>`;\n    }\n    return `<a href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer\">${label}</a>`;\n  });\n  return html;\n};\n\nconst simpleMatch = (sentenceA, sentenceB) => sentenceA.toLowerCase() === sentenceB.toLowerCase();\n\nconst extractAndMatch = (input, text) => {\n  const entities = [];\n  let match;\n  let value = text;\n  if (input === '*') {\n    entities.push({ type: 'any', value, offset: 0 });\n    match = true;\n  } else if (input.indexOf('{{') > -1) {\n    // Extract entities\n    input.replace(/{{\\s*([\\w.]*)\\s*(=?)\\s*@(any|email)\\s*}}/g, (m, name, eq, type, offset) => {\n      if (offset > 0) {\n        // TODO\n        value = undefined;\n      }\n      if (type === 'any') {\n        match = true;\n      } else if (type === 'email' && value && value.match(/\\b(\\w[-._\\w]*\\w@\\w[-._\\w]*\\w\\.\\w{2,3})\\b/gi)) {\n        match = true;\n      }\n      if (match) {\n        entities.push({ name, type, value, offset });\n      }\n    });\n  } else {\n    match = simpleMatch(input, text);\n    if (match) {\n      entities.push({ type: 'all', value, offset: 0 });\n    }\n  }\n  return [match, entities];\n};\n\nconst Dialog = (_intents, initialContexts) => {\n  let resp;\n  const contexts = initialContexts || {};\n  const buildOutput = ({ matchs, context: c = {}, userId }, renderer = htmlRenderer) => {\n    let context = deepCopy(c);\n    let match;\n    if (matchs && matchs.length > 1) {\n      matchs.forEach(m => {\n        if (!m.any && !match && m.intent.topic === context.topic) {\n          match = m;\n        }\n      });\n    }\n    if (!match && matchs[0]) {\n      [match] = matchs;\n    }\n    let response;\n    let entities;\n    if (match) {\n      const { intent } = match;\n      ({ entities } = match);\n      // Store in context all variables changed\n      if (intent.set) {\n        context = { ...context, ...intent.set };\n      }\n      // handle condition #129\n      let { output } = intent;\n      let set;\n      if (Array.isArray(output)) {\n        output.forEach(o => {\n          if (o.type === 'condition') {\n            output = null;\n            let value;\n            o.children.forEach(child => {\n              if ((!output || !value) && (child.value === context[child.name] || !child.value)) {\n                ({ value } = child);\n                output = child;\n              }\n            });\n          } else {\n            output = o;\n          }\n        });\n      }\n      let text = output;\n      if (output.text) {\n        ({ text } = output);\n      }\n      entities.forEach(e => {\n        if (e.name) {\n          context[e.name] = e.value;\n        }\n      });\n      ({ response, set } = renderTemplate(text, context, entities));\n      if (Object.keys(set).length) {\n        context = { ...context, ...set };\n      }\n      if (output.set) {\n        Object.keys(output.set).forEach(name => {\n          context[name] = getValue(output.set[name], entities);\n        });\n      }\n    } else {\n      response = \"I don't understand\";\n    }\n    contexts[userId] = deepCopy(context);\n    response = renderer(response);\n    return { response, context, entities };\n  };\n  if (_intents && Array.isArray(_intents) && _intents.length) {\n    const intents = _intents.map(i => preprocessIntent(i));\n    let m;\n    let entities;\n    const matchIntent = (message, userId = 'user') => {\n      const context = contexts[userId] || {};\n      const matchs = [];\n      intents.forEach(intent => {\n        let i = Array.isArray(intent.input)\n          ? intent.input.findIndex(input => {\n              [m, entities] = extractAndMatch(input, message.text);\n              return m;\n            })\n          : -1;\n        if (i === -1 && typeof intent.input === 'string') {\n          [m, entities] = extractAndMatch(intent.input, message.text);\n          i = m ? 0 : -1;\n        }\n        if (i >= 0) {\n          m = { intent, inputIndex: i, entities };\n          if (entities.length === 1 && entities[0].type === 'any') {\n            m.any = true;\n          }\n          matchs.push(m);\n        }\n      });\n      return { matchs: matchs.sort((a, b) => (a.intent.order || 0) - (b.intent.order || 0)), context, userId };\n    };\n    resp = [matchIntent, buildOutput];\n  }\n\n  return resp;\n};\n\nexport default Dialog;\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nconst MILLISECONDS_TO_SECONDS = 0.001;\nconst SECONDS_IN_YEAR = 31557600;\nconst SECONDS_IN_MONTH = 2629800;\nconst SECONDS_IN_DAY = 86400;\nconst SECONDS_IN_HOUR = 3600;\nconst SECONDS_IN_MINUTE = 60;\n\nexport const friendlyDate = (date, locale) => {\n  let remaining = (Date.now() - date) * MILLISECONDS_TO_SECONDS;\n  const years = Math.floor(remaining / SECONDS_IN_YEAR);\n  remaining -= years * SECONDS_IN_YEAR;\n  const months = Math.floor(remaining / SECONDS_IN_MONTH);\n  remaining -= months * SECONDS_IN_MONTH;\n  const days = Math.floor(remaining / SECONDS_IN_DAY);\n  remaining -= days * SECONDS_IN_DAY;\n  if (months || years || days > 6) {\n    return new Date(date).toLocaleString(locale);\n  }\n  if (days > 1) {\n    return new Date(date).toLocaleString(locale);\n  }\n  if (days === 1) {\n    return 'yesterday';\n  }\n  const hours = Math.floor(remaining / SECONDS_IN_HOUR);\n  remaining -= hours * SECONDS_IN_HOUR;\n  if (hours > 1) {\n    return `${hours} hours ago`;\n  }\n  if (hours === 1) {\n    return `${hours} hour ago`;\n  }\n  const mins = Math.floor(remaining / SECONDS_IN_MINUTE);\n  remaining -= mins * SECONDS_IN_MINUTE;\n  if (mins > 1) {\n    return `${mins} mins ago`;\n  }\n  if (mins === 1) {\n    return `${mins} min ago`;\n  }\n  if (remaining > 10) {\n    return `${remaining} secs ago`;\n  }\n  return 'just now';\n};\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// https://stackoverflow.com/questions/27936772/how-to-deep-merge-instead-of-shallow-merge\n\nconst deepCopy = (..._elements) => {\n  const stack = [];\n  const assign = (...elements) => {\n    let copy;\n    elements.forEach(e => {\n      if (Array.isArray(e)) {\n        if (!copy) {\n          copy = [];\n        }\n        e.forEach(sub => {\n          copy.push(assign(sub));\n        });\n      } else if (e instanceof Date) {\n        copy = new Date(e.getTime());\n      } else if (e && typeof e === 'object') {\n        stack.push(e);\n        if (!copy) {\n          copy = {};\n        }\n        stack.push(e);\n        Object.keys(e).forEach(k => {\n          const ek = e[k];\n          if (stack.indexOf(ek) !== -1) {\n            // Circular ref\n            copy[k] = ek;\n          } else {\n            copy[k] = assign(copy[k], ek);\n          }\n        });\n        stack.pop();\n      } else if (e !== null && e !== undefined) {\n        copy = e;\n      }\n    });\n    return copy;\n  };\n  return assign(..._elements);\n};\n\nexport default deepCopy;\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport { deepCopy } from '@ziiircom/common';\nimport useMessaging from './messaging';\n\n// simple Echo Messaging service\nconst useEcho = async listener => {\n  const [addMessage, getMessages, createMessage, , commands] = await useMessaging(listener);\n\n  const sendMessage = async message => {\n    addMessage(message);\n    await listener({ type: 'newMessage', message: deepCopy(message) });\n    const echo = createMessage('bot', `You say : ${message.text}`);\n    addMessage(echo);\n    await listener({ type: 'newMessage', message: echo });\n  };\n  return [getMessages, createMessage, sendMessage, commands];\n};\n\nexport default useEcho;\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport { setup } from '@ziiircom/components';\nimport useUI from './hooks/ui';\nimport { html, createElement, render } from './utils/builder';\nimport { styled } from './utils/styled';\nimport createStore from './utils/store';\nimport App from './app';\n\nconst ZiiirClient = async ({\n  state,\n  messaging,\n  root,\n  messageListener = ({ type, message }) => ({ type, message }),\n  dataset,\n}) => {\n  setup({ html, createElement, styled });\n  const ui = await useUI();\n  const store = createStore(state);\n  let handleAction;\n  const handleEventMessage = async ({ type, message }) => {\n    const container = document.getElementsByClassName('ziiir-conversation')[0];\n    if (type === 'newMessage') {\n      const m = createElement(\n        ui.Message,\n        {\n          key: message.created_time,\n          createdtime: message.created_time,\n          avatar: message.avatar,\n          fromUser: message.from === 'user',\n          onAction: handleAction,\n        },\n        message.text,\n      );\n      let insert;\n      // eslint-disable-next-line no-restricted-syntax\n      for (const c of container.children) {\n        const createdtime = parseInt(c.getAttribute('created-time'), 10);\n        if (message.created_time < createdtime) {\n          insert = { before: c };\n          break;\n        }\n      }\n      render(m, container, undefined, insert);\n      container.scrollTop = container.scrollHeight;\n    } else if (type === 'resetMessages') {\n      while (container.firstChild) {\n        container.firstChild.remove();\n      }\n    }\n    messageListener({ type, message });\n  };\n  const [getMessages, createMessage, sendMessage, commands] = await messaging(handleEventMessage, dataset);\n  const handleNewMessage = text => {\n    if (text.charAt(0) === '#') {\n      commands(text);\n    } else {\n      const message = createMessage('user', text);\n      sendMessage(message);\n    }\n  };\n  const messages = await getMessages();\n  const el = await App(messages, handleNewMessage);\n  handleAction = (action, data) => {\n    //  if (action === 'BUTTON') {\n    const message = createMessage('user', data);\n    sendMessage(message);\n    // }\n  };\n  render(el, root, { ...store });\n  return [store, getMessages, createMessage, sendMessage, commands, handleEventMessage];\n};\n\nexport default ZiiirClient;\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport Messenger from './Messenger';\n\nexport default Messenger;\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport Interface from '../interface';\nimport Box from '../components/Box';\nimport Header from '../components/Header';\nimport List from '../components/List';\nimport Footer from '../components/Footer';\nimport Message from '../components/Message';\nimport Input from '../components/Input';\nimport Theme from '../Theme';\n\nconst StyledMessenger = Interface.styled(Box)`\n  color: ${props => props.theme.palette.onSurface};\n  font-family: sans-serif;\n  font-size: 16px;\n  font-style: normal;\n  font-weight: 400;\n  line-height: 1.1;\n  overflow-wrap: break-word;\n\n  padding: 0px;\n  width: 400px;\n  height: 600px;\n  display: flex;\n  border-radius: 12px;\n  flex-direction: column;\n  box-shadow: rgba(0, 0, 0, 0.2) 0px 2px 4px -1px, rgba(0, 0, 0, 0.14) 0px 4px 5px 0px, rgba(0, 0, 0, 0.12) 0px 1px 10px 0px;\n\n  &.isexpanded .ziiir-conversation {\n    animation: 0.675s cubic-bezier(0.4, 0, 0.2, 1) 0.45s 1 normal both running enterConversation;\n    animation-delay: 0.45s;\n    animation-fill-mode: both;\n  }\n\n  @keyframes enterConversation {\n    0% {\n      height: 0;\n      padding: 0;\n      opacity: 0;\n    }\n  \n    50% {\n      opacity: 0;\n    }\n  \n    100% {\n      height: 100%;\n      padding: 16px;\n      opacity: 1;\n    }\n  }\n`;\n\nStyledMessenger.defaultProps = {\n  theme: Theme,\n};\n\nconst MessengerHeader = Interface.styled(Header)`\n  border-radius: 12px 12px 0 0;\n`;\n\nconst MessengerFooter = Interface.styled(Footer)`\n  border-radius: 0 0 12px 12px;\n`;\n\nconst Conversation = Interface.styled(List)`\n  transform-origin: center bottom 0px;\n  scroll-behavior: smooth;\n`;\n\nconst FooterInput = Interface.styled(Input)`\n  width: 100%;\n  padding: 4px;\n  margin: 0;\n  border: none;\n  outline:none;\n`;\n\nconst e = Interface.createElement;\nconst m = (createdtime, msg, fromUser, avatar) => e(Message, { key: createdtime, createdtime, avatar, fromUser }, msg);\nconst Messenger = ({\n  isExpanded = true,\n  input = { display: true },\n  header = {},\n  messages = [],\n  onMessage,\n  onClick,\n}) => {\n  const Messages = e(\n    Conversation,\n    { isExpanded, className: 'ziiir-conversation' },\n    messages\n      .sort((m1, m2) => m1.createdtime > m2.createdtime)\n      .map(msg => m(msg.createdtime, msg.text, msg.from === 'user', msg.avatar)),\n  );\n  let inputComponent = 'ziiir.com';\n  const handleKey = event => {\n    const value = event.target.value || '';\n    if (event.key === 'Enter' && value.length > 0) {\n      if (onMessage) {\n        onMessage(value);\n      }\n      // eslint-disable-next-line no-param-reassign\n      event.target.value = '';\n    }\n  };\n  if (input.display) {\n    inputComponent = e(FooterInput, {\n      className: 'ziir-input',\n      onKeyUp: handleKey,\n      placeholder: input.placeholder || 'Your message',\n    });\n  }\n  return e(\n    StyledMessenger,\n    { className: isExpanded ? 'isexpanded' : undefined, onClick },\n    e(MessengerHeader, null, header.text || ''),\n    Messages,\n    e(MessengerFooter, null, inputComponent),\n  );\n};\n\nexport default Messenger;\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport Box from './Box';\n\nexport default Box;\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport Interface from '../../interface';\nimport Theme from '../../Theme';\n\nconst Box = Interface.styled('div')`\n  padding: 1.2em;\n  background: ${props => props.theme.palette.background};\n  color: #292c45;\n  font-family: Roboto Condensed,sans-serif;\n  font-size: 16px;\n  font-style: normal;\n  font-weight: 400;\n  line-height: 1.1;\n  overflow-wrap: break-word;\n`;\n\nBox.defaultProps = {\n  theme: Theme,\n};\n\nexport default Box;\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport Header from './Header';\n\nexport default Header;\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport Interface from '../../interface';\nimport Theme from '../../Theme';\n\nconst Header = Interface.styled('header')`\n  color: ${props => props.theme.palette.onPrimary};\n  font-size: 1.25em;\n  background: ${props => props.theme.palette.primary};\n  min-height: 64px;\n  padding-top: 1.2em;\n  padding-left: 1.2em;\n  padding-right: 0.3em;\n  display: flex;\n`;\n\nHeader.defaultProps = {\n  theme: Theme,\n};\n\nexport default Header;\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport List from './List';\n\nexport default List;\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport Interface from '../../interface';\nimport Theme from '../../Theme';\n\nconst List = Interface.styled('div')`\n  padding: 0px;\n  background: ${props => props.theme.palette.background};\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  overflow-y: auto;\n  & > div {\n  }\n`;\n\nList.defaultProps = {\n  theme: Theme,\n};\n\nexport default List;\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport Footer from './Footer';\n\nexport default Footer;\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport Interface from '../../interface';\nimport Theme from '../../Theme';\n\nconst Footer = Interface.styled('div')`\n  color: ${props => props.theme.palette.disabledText};\n  font-size: 1em;\n  line-height: 36px;\n  min-height: 36px;\n  padding-left: 16px;\n  padding-right: 16px;\n  display: flex;\n  margin-top: auto;\n  & > button {\n    align-self: flex-end;\n    line-height: 24px;\n  }\n`;\n\nFooter.defaultProps = {\n  theme: Theme,\n};\n\nexport default Footer;\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport { friendlyDate } from '@ziiircom/common';\nimport Interface from '../../interface';\nimport Theme from '../../Theme';\n\nconst Styled = Interface.styled('div')`\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  max-width: 80%;\n  margin: 12px 0px 0px;\n\n  cursor: default;\n\n  margin-left: ${props => (props.fromUser ? 'auto' : 0)};\n\n  &:first-child {\n    margin-top: 0px;\n  }\n\n  & > div {\n    width: 100%;\n    animation: 0.3s cubic-bezier(0, 0, 0.2, 1) 0s 1 normal both running ${props =>\n      props.fromUser ? 'enterMessageFromUser' : 'enterMessageFromBot'};\n  }\n  & > div > p {\n    background-color: ${props => (props.fromUser ? props.theme.palette.secondary : props.theme.palette.surface)};\n    color: ${props => (props.fromUser ? props.theme.palette.onSecondary : props.theme.palette.onSurface)};\n    box-shadow: rgba(0, 0, 0, 0.2) 0px 1px 5px 0px, rgba(0, 0, 0, 0.14) 0px 2px 2px 0px, rgba(0, 0, 0, 0.12) 0px 3px 1px -2px;\n    margin-bottom: 4px;\n    padding: 16px;\n    border-radius: ${props => (props.fromUser ? '12px 12px 4px 12px' : '12px 12px 12px 4px')};\n    overflow-wrap: break-word;\n    line-height: 1.44;\n  }\n  & > div > span {\n    text-align: ${props => (props.fromUser ? 'right' : 'left')};\n    display: block;\n    margin: 0px 16px;\n    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1) 0s;\n    opacity: 0.5;\n    font-size: 0.75rem;\n    font-weight: 400;\n    line-height: 1.66;\n  }\n  & > div > p > button {\n    border: none;\n    border-radius: 12px;\n    height: 24px;\n    margin: 2px 4px;\n    background: ${props => props.theme.palette.secondary};\n    color: ${props => props.theme.palette.onSecondary};\n    cursor: pointer;\n    font-size: 16px;\n  }\n  @keyframes enterMessageFromUser {\n    0% {\n      transform: translate( 0, 20px );\n      opacity: 0;\n    }\n  \n    100% {\n      transform: translate( 0, 0 );\n      opacity: 1;\n    }\n  }\n\n  @keyframes enterMessageFromBot {\n    0% {\n      transform: translate( - $message-avatar-size, 0 );\n      opacity: 0;\n    }\n  \n    100% {\n      transform: translate( 0, 0 );\n      opacity: 1;\n    }\n  }\n`;\n\nStyled.defaultProps = {\n  theme: Theme,\n};\n\nconst Avatar = Interface.styled('img')`\n  z-index: 3;\n  flex-shrink: 0;\n  width: 40px;\n  height: 40px;\n  margin-top: auto;\n  margin-right: 8px;\n  animation: 0.3s cubic-bezier(0.4, 0, 0.2, 1) 0s 1 normal none running enterAvatar;\n  border-radius: 50%;\n\n  @keyframes enterAvatar {\n    0% {\n      transform: scale( .5, .5 );\n      opacity: 0;\n    }\n  \n    30% {\n      transform: scale( 1.25, 1.25 );\n      opacity: 1;\n    }\n  \n    80% {\n      transform: scale( .9, .9 );\n    }\n  \n    100% {\n      transform: scale( 1, 1 );\n    }\n  }  \n`;\n\nconst e = Interface.createElement;\nconst Message = ({ createdtime, avatar, fromUser = true, children, onAction }) => {\n  const meta = friendlyDate(createdtime);\n  let html = children;\n  let body = children;\n  if (Array.isArray(html)) {\n    [html] = children;\n  }\n  if (\n    typeof html === 'string' &&\n    (html.indexOf('/>') > 0 || html.indexOf('</') > 0 || html.indexOf('/&gt;') > 0 || html.indexOf('&lt;/') > 0)\n  ) {\n    html = { __html: html };\n    body = undefined;\n  } else {\n    html = undefined;\n  }\n  const handleClick = event => {\n    if (event.target.tagName === 'BUTTON') {\n      onAction(event.target.tagName, event.target.textContent);\n    }\n  };\n  return e(\n    Styled,\n    { fromUser, 'created-time': createdtime },\n    e('div', { onClick: handleClick }, e('p', { dangerouslySetInnerHTML: html }, body), e('span', null, meta)),\n    avatar && e(Avatar, { src: avatar.src, alt: avatar.name }),\n  );\n};\n\nexport default Message;\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport Input from './Input';\n\nexport default Input;\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport Interface from '../../interface';\nimport Theme from '../../Theme';\n\nconst Input = Interface.styled('input')`\n  font-size: 1em;\n  margin: 0.6em;\n  padding: 0.3em 1em;\n  border-radius: 3px;\n\n  color: ${props => props.theme.palette.secondary};\n  border: 2px solid ${props => props.theme.palette.secondary};\n`;\n\nInput.defaultProps = {\n  theme: Theme,\n};\n\nexport default Input;\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport Fab from './FAButton';\n\nexport default Fab;\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport Interface from '../../interface';\nimport Theme from '../../Theme';\n\n// Source <a href=\"https://icons8.com/icon/81488/speech-bubble\">Speech Bubble icon by Icons8</a>\nconst icon = (_color, _bubbleColor = 'ffffff') => {\n  let color = _color;\n  if (color[0] === '#') color = color.substring(1);\n  let bubbleColor = _bubbleColor;\n  if (bubbleColor[0] === '#') bubbleColor = bubbleColor.substring(1);\n  return `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' x='0px' y='0px'%0Awidth='64' height='64'%0AviewBox='0 0 172 172'%0Astyle=' fill:%23000000;'%3E%3Cg fill='none' fill-rule='nonzero' stroke='none' stroke-width='1' stroke-linecap='butt' stroke-linejoin='miter' stroke-miterlimit='10' stroke-dasharray='' stroke-dashoffset='0' font-family='none' font-weight='none' font-size='none' text-anchor='none' style='mix-blend-mode: normal'%3E%3Cpath d='M0,172v-172h172v172z' fill='none'%3E%3C/path%3E%3Cg%3E%3Cpath d='M138.64141,105.21563c0,6.08047 -4.90469,10.98516 -10.98516,10.98516h-83.3125c-6.08047,0 -10.98516,-4.90469 -10.98516,-10.98516v-48.50937c0,-6.08047 4.90469,-10.98516 10.98516,-10.98516h83.3125c6.08047,0 10.98516,4.90469 10.98516,10.98516z' fill='%23${bubbleColor}'%3E%3C/path%3E%3Cpath d='M113.21094,130.98203c-0.87344,0.87344 -2.25078,0.87344 -3.12422,0l-10.51484,-14.88203c-0.87344,-0.87344 -0.87344,-2.25078 0,-3.12422h24.1875c0.87344,0.87344 0.87344,2.25078 0,3.12422z' fill='%23${bubbleColor}'%3E%3C/path%3E%3Cg fill='%23${color}'%3E%3Cpath d='M122.58359,64.36562c0,2.21719 -1.78047,3.99766 -3.99766,3.99766h-65.44063c-2.21719,0 -3.99766,-1.78047 -3.99766,-3.99766v0c0,-2.21719 1.78047,-3.99766 3.99766,-3.99766h65.47422c2.18359,0.03359 3.96406,1.81406 3.96406,3.99766zM122.58359,80.35625c0,2.21719 -1.78047,3.99766 -3.99766,3.99766h-65.44063c-2.21719,0 -3.99766,-1.78047 -3.99766,-3.99766v0c0,-2.21719 1.78047,-3.99766 3.99766,-3.99766h65.47422c2.18359,0 3.96406,1.78047 3.96406,3.99766zM122.58359,96.31328c0,2.21719 -1.78047,3.99766 -3.99766,3.99766h-65.44063c-2.21719,0 -3.99766,-1.78047 -3.99766,-3.99766v0c0,-2.21719 1.78047,-3.99766 3.99766,-3.99766h65.47422c2.18359,0 3.96406,1.78047 3.96406,3.99766z'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E%0A`;\n};\n\nconst Fab = Interface.styled('div')`\nwidth:48px;\nheight:48px;\nborder-radius:100%;\ncolor: ${props => props.theme.palette.onSecondary};\nfont-size: 1.25em;\nline-height: 64px;\nbackground: ${props => props.theme.palette.secondary};\nbackground-image: ${props =>\n  props.icon\n    ? `url(\"${props.icon}\")`\n    : `url(\"${icon(props.theme.palette.secondary, props.theme.palette.bubbleColor)}\")`};\nbackground-repeat:no-repeat;\nbackground-position:50%;\nbackground-size:cover;\nbox-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12);\ncursor:pointer;\n`;\n\nFab.defaultProps = {\n  theme: Theme,\n};\n\nexport default Fab;\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport useUI from './hooks/ui';\nimport { styled } from './utils/styled';\nimport { useRef } from './utils/builder';\nimport { useSelector } from './utils/store';\n\nconst App = async (messages, onMessage) => {\n  const [_isOpen, header, input] = useSelector(state => [\n    state.messenger.isOpen,\n    state.messenger.header,\n    state.messenger.input,\n  ]);\n  let isOpen = _isOpen;\n  const messengerRef = useRef(null);\n  const handleFabClick = () => {\n    isOpen = !isOpen;\n    const messenger = messengerRef.current;\n    messenger.classList.toggle('isclosed');\n    messenger.classList.toggle('isopen');\n  };\n\n  const handlePrevClick = event => {\n    event.stopPropagation();\n  };\n\n  const handleMessage = message => {\n    onMessage(message);\n  };\n\n  const ui = await useUI();\n\n  const Messenger = styled(ui.Messenger, { onMessage: handleMessage, onClick: handlePrevClick, header, input })`\n    width: 100%;\n    max-width: 600px;\n    height: 80%;\n  `;\n\n  const MessengerFrame = styled(\n    'div',\n    { ref: messengerRef, className: `ziiircom-messenger is${isOpen ? 'open' : 'closed'}`, onClick: handleFabClick },\n    Messenger,\n  )`\n    display: flex;\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100vw;\n    height: 100vh;\n    z-index: 3;\n    flex-direction: column;\n    flex-shrink: 0;\n    align-items: center;\n    justify-content: center;\n\n    &.isopen {\n      display: flex;\n    }\n\n    &.isclosed {\n      display: none;\n    }\n  `;\n\n  const Fab = styled(ui.FAButton, { className: 'ziiircom-messenger-fab', onClick: handleFabClick })`\n    position: absolute;\n    right: 32px;\n    bottom: 32px;\n    z-index: 9;\n  `;\n\n  return styled('div', { className: 'ziiircom-messenger-frame' }, MessengerFrame, Fab)`\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100vw;\n    height: 100vh;\n    margin: 0;\n    padding: 0;\n  `;\n};\n\nexport default App;\n"],"sourceRoot":""}